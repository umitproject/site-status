{% extends 'base.html' %}
{% load media %}
{% load status_tags %}

{% block title %}{{ SITE_NAME }} Status{% endblock %}

{% block extra_head %}{% endblock %}

{% block header_status %}
	{% include "parts/header_status.html" %}
{% endblock %}
	
{% block first_content %}
<div class="box">
	<div class="text_box">
		<p class="title">Site Status</p>
		<table>
			<tr>
				<td>Module</td>
				{% last_days_header "7" %}
			</tr>
			{% for module in modules %}
			<tr>
				<td><a href='{{ module.url }}'>{{ module.name }}</a></td>
				{% for day in module.last_7_days %}
				<td>
					{% for status in day.list_statuses %}
						<img src='{% media_url status.1 %}' alt='{% verbose_status status.0 %}'/>
					{% endfor %}
				</td>
				{% endfor %}
				<td><img src='{% media_url module.status_img %}' alt='{% verbose_status module.status %}'/></td>
			</tr>
			{% endfor %}
		</table>
		<div class="more"><a href="" ></a></div>
	</div>
</div>
{% if scheduled_maintenances or twitter_account %}
	<img src="{% media_url "img/hr.png" %}" alt="" />
{% endif %}
{% endblock %}
			
{% block twitter %}
{% if twitter_account %}
<div class="box">
	<div class="text_box">
		<p class="title">Twitter</p>
			<script src="http://widgets.twimg.com/j/2/widget.js"></script>
			<script>
			new TWTR.Widget({
			  version: 2,
			  type: 'profile',
			  rpp: 4,
			  interval: 6000,
			  width: 880,
			  height: 500,
			  theme: {
			    shell: {
			      background: '#333333',
			      color: '#ffffff'
			    },
			    tweets: {
			      background: '#000000',
			      color: '#ffffff',
			      links: '#4aed05'
			    }
			  },
			  features: {
			    scrollbar: false,
			    loop: false,
			    live: false,
			    hashtags: true,
			    timestamp: true,
			    avatars: false,
			    behavior: 'all'
			  }
			}).render().setUser('{{ twitter_account.login }}').start();
			</script>
		<div class="more"><a href="" ></a></div>
	</div>
</div>
{% if scheduled_maintenances %}
	<img src="{% media_url "img/hr.png" %}" alt="" />
{% endif %}
{% endif %}
{% endblock %}
			
{% block scheduled_maintenances %}
{% if scheduled_maintenances %}
	<br />
	<br />
	<div class='box'>
		{% for schedule in scheduled_maintenances %}
			<div class="text_box">
				<p class="title"><img src='{% media_url schedule.status_img %}' alt='{% verbose_status schedule.status %}'/>&nbsp;&nbsp;{% verbose_status schedule.status %} on {{ schedule.scheduled_to|date:"DATETIME_FORMAT" }}</p>
				<p class="description">Downtime estimate: <b>{{ schedule.time_estimate }} minutes</b><br/><br/>{{ schedule.message }}</p>
				<div class="more"><a href="" ></a></div>
			</div>
		{% endfor %}
	</div>
{% endif %}
{% endblock %}