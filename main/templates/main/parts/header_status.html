{% load i18n %}
{% if SHOW_INCIDENTS or SHOW_UPTIME %}
	<script type="text/javascript" src="https://www.google.com/jsapi"></script>
	<script type="text/javascript">
	  google.load("visualization", "1", {packages:["corechart"]});
	  
	  {% if SHOW_INCIDENTS %}
		  function drawIncidentsChart() {
		    var data = new google.visualization.DataTable();
		    data.addColumn('string', '{% trans "Day" %}');
		    data.addColumn('number', '{% trans "Downtime" %}');
		    data.addRows({{ incidents_data|safe }});
		
		    var chart = new google.visualization.AreaChart(document.getElementById('incidents_chart'));
		    chart.draw(data, {width: 400, height: 150,
		                      hAxis: {textPosition: 'none'},
		                      vAxis: {textPosition: 'none',
		                      		  gridlineColor:'none',
		                      		  maxValue:101,
		                      		  minValue:0},
		                      chartArea: {width: '90%',
		                      			  height: '70%'},
		                      colors: ['red'],
		                      legend: 'none',
		                      axisTitlesPosition: 'none'
		                     });
		  }
		  google.setOnLoadCallback(drawIncidentsChart);
	  {% endif %}
	  
	  {% if SHOW_UPTIME %}
		  function drawUptimeChart() {
		    var data = new google.visualization.DataTable();
		    data.addColumn('string', '{% trans "Day" %}');
		    data.addColumn('number', '{% trans "Uptime" %}');
		    data.addRows({{ uptime_data|safe }});
		
		    var chart = new google.visualization.AreaChart(document.getElementById('uptime_chart'));
		    chart.draw(data, {width: 400, height: 150,
		                      hAxis: {textPosition: 'none'},
		                      vAxis: {textPosition: 'none',
		                      		  gridlineColor:'none',
		                      		  maxValue:101,
		                      		  minValue:0},
		                      chartArea: {width: '90%',
		                      			  height: '70%'},
		                      colors: ['blue'],
		                      legend: 'none',
		                      axisTitlesPosition: 'none',
		                     });
		  }
		  google.setOnLoadCallback(drawUptimeChart);
	  {% endif %}
	</script>
{% endif %}

<div id="video">
	<div id="get-started">
			<h2>{% trans "Availability - " %}{{ current_availability }} %</h2>
			
			{% if SHOW_LAST_INCIDENT %}
				<div class='status_header_block'>
					<p class='status_header_title'>{% trans "Last Incident" %}</p>
					<p class='status_header_value'>{{ last_incident.verbose_html|safe }}</p>
				</div>
			{% endif %}
			<table class="chart-table">

                <thead>
                {% if SHOW_INCIDENTS %}
                        <th>{% trans "Incidents" %}</th>
                {% endif %}

                {% if SHOW_UPTIME %}
                        <th>{% trans "Uptime" %}</th>
                {% endif %}
                </thead>
                <tbody>
                    <td>
                        {% if SHOW_INCIDENTS %}
                            <div id='incidents_chart'></div>
                        {% endif %}
                    </td>
                    <td>
                        {% if SHOW_UPTIME %}
                            <div id='uptime_chart'></div>
                        {% endif %}
                    </td>
                </tbody>
            </table>
			{% if msg %}
				<p class="msg">{{ msg }}</p>
			{% endif %}
	</div>
</div>